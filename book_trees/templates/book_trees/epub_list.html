{% extends 'book_trees/base.html' %}

{% block title %}EPUB Library{% endblock %}

{% block content %}
<h1>Your EPUB Library</h1>

<p>Total files: {{ epubs.count }}</p>

<p><a href="{% url 'upload_epub' %}">Upload New EPUB</a></p>

{% if epubs %}
    {% for epub in epubs %}
        <div>
            <h3>{{ epub.original_filename }}</h3>
            <p>Uploaded: {{ epub.uploaded_at }}</p>
            <p>Status: {{ epub.get_status_display }}</p>
            <p>Processed: {% if epub.processed %}Yes{% else %}No{% endif %}</p>
            <p>
                <a href="{% url 'epub_detail' epub.pk %}">View Details</a> |
                <a href="{{ epub.file.url }}" download>Download</a> |
                <a href="{% url 'delete_epub' epub.pk %}">Delete</a>
            </p>
            <hr>
        </div>
    {% endfor %}
{% else %}
    <p>No EPUB files uploaded yet.</p>
    <p><a href="{% url 'upload_epub' %}">Upload your first EPUB</a></p>
{% endif %}
{% endblock %}